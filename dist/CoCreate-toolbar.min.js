!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoCreate=t():(e.CoCreate=e.CoCreate||{},e.CoCreate.toolbar=t())}(this,(function(){return(()=>{"use strict";var e={727:(e,t,r)=>{function n(e=36){let t=(new Date).getTime(),r=window.performance&&window.performance.now&&1e3*window.performance.now()||0,n="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=n.length)n=n.substr(0,e);else{let t=e-n.length,r="-xxxyyxxx",o=Math.floor(t/r.length);for(let e=0;e<o;e++)n+=r;o=t-o*r.length,n+=r.substr(0,o)}return n.replace(/[xy]/g,(function(e){var n=16*Math.random();if(t>0){n=(t+n)%16|0;t=Math.floor(t/16)}else{n=(r+n)%16|0;r=Math.floor(r/16)}return("x"==e?n:7&n|8).toString(16)}))}function o(e,t,r){if(t){if(e.classList.contains(t))return e;let r=e.parentNode;for(;null!=r&&r.classList;){if(r.classList.contains(t))return r;r=r.parentNode}}else if(r){if(r.every((t=>e.attributes.hasOwnProperty(t))))return e;let t=e.parentNode;for(;null!=t&&t.attributes;){if(r.every((e=>t.attributes.hasOwnProperty(e))))return t;t=t.parentNode}}return!1}function i(e){try{let t=JSON.parse(e);return"object"==typeof t&&null!=t}catch(e){return!1}}function l(e){return e.getAttributeNames().reduce(((t,r)=>(t[r]=e.getAttribute(r),t)),{})}function a(e){return!!e&&!/{{\s*([\w\W]+)\s*}}/g.test(e)}function c(e){let t=[{document,window}];for(let e of document.querySelectorAll("iframe")){let r=e.contentDocument||e.contentWindow.document,n=e.contentWindow;t.push({document:r,window:n,frameElement:e})}let r=new Set;for(let n of t){let t=e(n);t&&"function"==typeof t[Symbol.iterator]?t.forEach((e=>r.add(e))):t&&r.add(t)}return Array.from(r)}function f(e){let t=[];do{if(!e||!e.tagName)return!1;let r=e.tagName.toLowerCase();if(e.id&&"BODY"!==e.tagName&&(r+="#"+e.id),e.classList.length&&"BODY"!==e.tagName&&e.classList.forEach((e=>{-1===e.indexOf(":")&&(r+="."+e)})),"BODY"!==e.tagName&&e.parentNode){let t=Array.prototype.indexOf.call(e.parentNode.children,e);r+=`:nth-child(${t+1})`}t.unshift(r),e=e.parentNode}while("HTML"!==e.tagName);return t.join(" > ")}function u(){let e=window;for(;e!==window.parent;)e=window.parent;return e}function s(e,t){let r;return c((e=>{e.document.contains(t)&&(r=e.frameElement)})),r}function d(e){let t=u;return e.forEach((e=>{t&&(t=t.querySelector(e))})),t}function*m(e,t){for(let r of e)r.selector&&t.matches(r.selector)&&(yield r)}function p(e,t,r,n){for(let o of m(n||window.elementConfig,e)){if(!0===o[t])return r(e,o);if(!1===o[t])return!1;if(void 0===o[t])continue;if(w(o[t]))return r(e,o,!0)}return!1}function g(e=10){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=r.length,o=0;o<e;o++)t+=r.charAt(Math.floor(Math.random()*n));return t+=(new Date).toTimeString().replace(/[\W_]+/g,"").substr(0,6)}function x(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.head.children[0]?t.head.children[0]:t.body.children[0]}function h(e,t){return e.split(t).map((e=>e.trim()))}function y(e,t){return e.map((e=>e.trim())).join(t)}function w(e){try{document.createDocumentFragment().querySelector(e)}catch(e){return!1}return!0}function b(e,t){let r=[],n=(window,s(0,e)),o=f(n);return o&&r.unshift(o),t?{path:r,document:n||document}:r}r.r(t),r.d(t,{generateUUID:()=>n,getParentFromElement:()=>o,isJsonString:()=>i,getAttributes:()=>l,checkValue:()=>a,allFrame:()=>c,cssPath:()=>f,getTopMostWindow:()=>u,findIframeFromElement:()=>s,getIframeFromPath:()=>d,configMatch:()=>m,configExecuter:()=>p,UUID:()=>g,parseTextToHtml:()=>x,splitBydelimiter:()=>h,joinBydelimiter:()=>y,isValidSelector:()=>w,getElementPath:()=>b,default:()=>v});const v={getElementPath:b,isValidSelector:w,joinBydelimiter:y,splitBydelimiter:h,parseTextToHtml:x,UUID:g,configExecuter:p,configMatch:m,getIframeFromPath:d,findIframeFromElement:s,getTopMostWindow:u,cssPath:f,allFrame:c,checkValue:a,getAttributes:l,isJsonString:i,getParentFromElement:o,generateUUID:n}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{var e=n;e.default=void 0;var t=r(727);let o={};var i={init:function({selector:e,eventType:r,document:n,config:i,configKey:l}){let a,c,f,u=n.defaultView?n.defaultView.frameElement:n.ccdefaultView.frameElement;u?(f=u,a=u.contentWindow,c=a.document||a.contentDocument):(f=u.contentWindow.document.body,c=document,a=window);let s=document.querySelector(e);if(s){o[e]=s;let n=s.querySelector(":scope .toolbar"),u=s.querySelector(":scope [tagName]");n||(n={offsetHeight:0});let m,p={};function d(e){e||(m&&m.unobserve(p.lastElement),m=new ResizeObserver((()=>p.element&&d(!0))),m.observe(p.element)),(0,t.configExecuter)(p.element,l,((e,t,r)=>{if(r){let e=t[l];o[e]||(s=document.querySelector(e),o[e]=s,n=s.querySelector(":scope .toolbar"),u=s.querySelector(":scope [tagName]"))}let i=function(e){let{x:t,y:r}=e.getBoundingClientRect();return{left:t,top:r}}(e);s.style.display="block",s.style.top=f.offsetTop+i.top-a.scrollY-n.offsetHeight+"px",s.style.left=f.offsetLeft+i.left+a.scrollX+"px",s.style.width=e.offsetWidth+"px",s.style.height=e.offsetHeight+"px",e.offsetTop-n.offsetHeight<0?s.setAttribute("toolbar-overflow",""):s.removeAttribute("toolbar-overflow"),u&&u.innerHTML!==e.tagName&&(u.innerHTML=e.tagName,t.tagName&&t.tagName!==u.innerHTML&&(u.innerHTML=t.tagName))}),i)}window.cocreateToolbar=c,c.addEventListener(r,(e=>{p.lastElement=p.element,p.element=e.target,d()})),a.addEventListener("scroll",(()=>p.element&&d(p.element)))}}};e.default=i})(),n=n.default})()}));